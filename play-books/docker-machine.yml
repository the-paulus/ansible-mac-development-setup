---
- name: "Create Docker Machine"
  shell: "docker-machine create default --driver {{ docker_machine_driver }} --{{ docker_machine_driver }}-cpu-count \"{{ docker_machine_cpus }}\" --{{ docker_machine_driver }}-disk-size \"{{ docker_machine_disk_size }}\" --{{ docker_machine_driver }}-memory \"{{ docker_machine_ram }}\""

- name: "Stop VM (virtualbox)"
  shell: 'VBoxManage controlvm default poweroff'

- name: "Stop VM (virtualbox)"
  shell: 'VBoxManage controlvm default poweroff'

- name: "Add port forwarding"
  shell: "VBoxManage modifyvm default --natpf1 \"{{ item }}\""
  with_items:
    - 'http,tcp,,80,,80'
    - 'phpmyadmin,tcp,,8080,,8080'
    - 'https,tcp,,443,,443'
    - 'mysql,tcp,,3306,,3306'

- name: "Start VM"
  shell: 'VBoxManage startvm default'
